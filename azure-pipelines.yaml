trigger:
- main
- release/*
- development

pr:
- development

pool: AzureWorkflowTutorial

variables:
  isFeature: $[eq(variables['Build.SourceBranch'], 'feature/*')]
  isRelease: $[eq(variables['Build.SourceBranch'], 'release/*')]
  isDevelopment: $[eq(variables['Build.SourceBranch'], 'development')]
  isMain: $[eq(variables['Build.SourceBranch'], 'main')]

stages:
#- stage:
#  displayName: Quality check
#  jobs:
#  - job:
#    steps:
#      - task: Bash@3
#        displayName: Lint stage
#        inputs:
#          targetType: 'inline'
#          script: |
#            REPOSITORY_NAME="$(cut -d'/' -f2 <<< $(Build.Repository.Name))"
#            echo "$REPOSITORY_NAME"
#            echo "I'm the linting stage"
#- stage:
#  displayName: Automated tests
#  jobs:
#  - job:
#    steps:
#      - task: Bash@3
#        displayName: Test stage
#        inputs:
#          targetType: 'inline'
#          script: |
#            echo "$REPOSITORY_NAME"
#            echo "I'm the testing stage"
- stage:
  displayName: Build
  jobs:
  - job:
    steps:
      - task: Bash@3
        displayName: Build Stage
        inputs:
          targetType: 'inline'
          script: |
            echo "Build reason is: $(Build.Reason)"
            echo "Build id is: $(Build.BuildId)"
            echo "Build source version is: $(Build.SourceVersion)"
            echo "$(isFeature)"
            echo "$(isRelease)"
            echo "$(isDevelopment)"
            echo "$(isMain)"
            echo "Build source branch is: $(Build.SourceBranch)"
            echo "I'm the build stage"